# MyFiastAPIproject2

FastApi project

# MyFastApiProject

Проект на FastAPI с использованием PostgreSQL в качестве БД. Реализация REST API по работе с меню ресторана. Для более
удобного запуска используется docker-compose. Версия 2, добавлены агрегационные запросы, добавлены тесты, добавлен
тестовый сценарий подсчёт количества блюд в меню и подменю.

## Установка и запуск

Следуйте инструкциям ниже, чтобы установить и запустить проект на своем компьютере или сервере.

### Предварительные требования

Наличие:

- Docker
- Docker Compose

### Клонирование репозитория

```bash
git clone https://github.com/Ilya2520/MyFastAPIproject2.git
cd MyFastAPIproject2
```

### Запуск проекта

- В Pycharm открыть File -> settings -> python interpreter, добавить New enviroment
- Перейти в коммандной строке Windows в директорию проекта и запустить команду:
  ```
  venv\Scripts\activate
  ```
- Далее выполнить следующую команду(docker должен быть установлен и запущен с правами администратора)

```
docker-compose up --build
```

- Теперь программа готова к тестированию

### Запуск тестирования

Для запуска тестов запустите следующую команду

```
docker-compose -f docker-compose-test.yml up
```

### Структура проекта

- app/ - директория с файлами приложения
- docker/ - директория с Docker-контейнерами и Docker-файлами
- requirements.txt - файл зависимостей для установки необходимых пакетов

### Последние изменения:
Проект переписан на асинхронное выполнение. Реализован парсинг данных из эксель таблицы и вставка его в бд. Backgrount tasks Добавлен в функцию вызова инвалидации кэша в каждом репозитории.
Postman тесты можно запускать после выполнения pytest-тестов, сейчас основной docker-compose выполняет заполнение из
базы данных эксель, однако в связи с недостатком времени, я не успел доделать изменение каждые 15 секунд, в файле
task.py есть задача проверяющая на наличие изменений количество и и изменений полей, но в данный момент они не былы дореализованы до конца. Если будет время на правки, я дореализую. Код местами громоздкий, в связи с нехваткой времени из-за долгой переписи кода на асинхрон.
В crud.pt присутствует запрос на вывод всех меню подменю блюд, однако я не до конца понял условие и использовал selectionload.
